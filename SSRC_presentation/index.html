<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Nausheen Husain</title>
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,400,300,600,700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
	<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>

</head>
<body>
	
<style type="text/css">
	
	h1{
		font-family:			'Montserrat', serif;
		font-size:				60px;
	}
	h2{
		font-family:			'Open Sans', sans-serif;
		font-size:				35px;
		text-align: 			center;
	}
	h3{
		font-family:			'Open Sans', serif;
		font-size:				20px;
		line-height:			30px;
	}
	h4{
		font-family:			'Open Sans', serif;
		font-size:				15px;
	}
	img.displayed{
		display:				block;
		margin-right: 			auto;
		margin-left: 			auto;
	}
	.container{
		margin-bottom:			100px;
		background-color:		#D2D7D2;
		/*width: 					auto;*/
	}
	.intro{
		background-color:		#D2D7D2;
		color:					#913737;
		text-align:				center;
		padding:				10px;
	}
	#end{
		background-color:		#D2D7D2;
		color:					#913737;
		text-align:				center;
		margin-bottom:			50px;
	}
	.col-sm-8 {
		text-align:				center;
		padding:				20px;
	}
	
</style>
	
	
	
<div class="intro">
	<h1>Nausheen Husain</h1>
	<h4> [NO'SHEEN HOO-SANE'] </h4>
</div>
<br><br>

<div id="title">
	<h2> Let's play with csvkit! </h2>
</div>
<br>

<div class="container">
	<!-- <div class="row"> -->
		<!-- <div class="col-sm-8 col-sm-offset-2"> -->

			<h3> * Download data here. Save folder to Desktop, or somewhere easily accessible. </h3>
			<h3> * Open up your command line (Terminal on Mac). </h3>
			<h3> * Let's install csvkit using <code>$ sudo pip install csvkit</code>. You may have to type in a password.</h3>
			<h3> * Change directories into the data folder. <code>$ cd /Users/your_name/Desktop/hate_crimes_data </code> </h3>
			
		<!-- </div> -->
	<!-- </div> -->
</div>

<div class="container">
	<!-- <div class="row"> -->
		<!-- <div class="col-sm-8 col-sm-offset-2"> -->

			<h3> Let's play with hate crime data from 2001. </h3>
			<h3> * First, we'll transfer the Excel file into a CSV (comma separated value) file, which is generally easier to work with. <code> $ in2csv 2001_state_profiles.xlsx > 2001_percentage.csv </code> </h3>
			<h3> * Let's look at the data as a whole. <code>$ csvlook 2001_percentage.csv</code> This should give you a fairly readable view of states, participating agencies and incidents reported.</h3>
			<!-- <img class="displayed" src="csvlook.jpg" align="middle"></img> -->
			<h3>* Let's get some more information about our columns using <code>csvstat 2001_percentage.csv</code>.</h3>
			<h3>* Let's say we want to focus on the agency information for each state. Try <code>$ csvcut -c 1,2,4 2001_percentage.csv | csvlook | head</code> .</h3>
			<h2>Pipes are awesome!</h2>
			<h3>* Let's get even more specific. Try <code>csvcut -c 1,2,4 2001_percentage.csv | csvgrep -c Participating_states -m Illinois | csvlook</code>.</h3>
			<h3>* Organization is important. Check out what happens when you type <code>csvcut -c 1,2,4 2001_percentage.csv | csvsort -c Number_of_participating_agencies -r | csvlook</code>.</h3>
			<h3>** What would you type into the command line to order this data by most to least populated states?</h3>
			
		<!-- </div> -->
	<!-- </div> -->
</div>

<div class="container">

	<h3>Your turn! Play around with 2013_state_profiles.xlsx. Do the following:</h3>
		<h3>Turn the Excel file into a csv file.</h3>
		<h3>Use csvstat, csvlook, head, csvcut and csvgrep.</h3>
		<h3>Find out which state has a higher rate of agencies submitting incident reports per number of participating agencies: New York or Tennessee.</h3>

</div>

<div class="container">

	<h3> Wouldn't it be cool if we could compare the rate of agencies submitting incident reports per number of participating agencies for ALL of the states? What would we need to do to make this possible? </h3>
	<h3> Open up your hate_crimes_data folder in your Finder and drag "hatecrimesdivide.py" into any text editing program (TextEdit, TextMate, Sublime). You can also just watch the screen for this part.</h3>
	<h2>Scripting is awesome!</h2>
	<h3> Go back to your command line and use <code>python hatecrimesdivide.py</code> to apply the python script to 2001_percentage.csv.</h3>
	<h3>Now try <code>csvlook 2001_percentage.csv | head</code>. What did the script do?</h3>
	<h3> Let's return back to our text editor and edit the input_file before applying the script to our 2013_percentage.csv file. Change <code>input_file = '2001_percentage.csv'</code> to <code>input_file = '2013_percentage.csv'</code>. Change <code> writer.writerow(next(reader) + ["2001_percentage"])</code> to <code> writer.writerow(next(reader) + ["2013_percentage"])</code>.</h3>
	<h3>Run the same commands for the 2013 data: <code>python hatecrimesdivide.py</code> and then <code>csvlook 2013_percentage.csv | head</code>.</h3>
	<h3>Now we have rates of reporting for all the states for 2001 and 2013.</h3>

</div>

<div class="container">

	<h3> We can use csvkit to compare these two years. In order to be able to visualize this data, we need to get the percentages into one csv file with the Participating_state column. </h3>
	<h3>Let's go back to our csvcut function. Try <code>csvcut -c 1,6 2001_percentage.csv > 2001_cut.csv</code></h3>
	<h3>Let's see what that looks like using <code>csvlook 2001_cut.csv | head</code>.</h3>
	<h3>Now let's do the same with our 2013 data. Type in <code>csvcut -c 1,6 2013_percentage.csv > 2013_cut.csv</code> and check out the result with <code>csvlook 2013_cut.csv | head</code>.</h3>
	<h3>Now we have two files, 2001_cut.csv and 2013_cut.csv, each with a state column and a percentage column. Wouldn't it be great if we could somehow magically join those?</h3>
	<h2>OH WAIT. WE CAN TOTALLY DO THAT.</h2>
	<h3>Let's see what csvjoin can do for us. Try <code>csvjoin -c Participating_state 2001_cut.csv 2013_cut.csv | csvlook | head</code>.</h3>
	<h3>Let's use it with our pipes to cut out the extra state column: <code>csvjoin -c Participating_state 2001_cut.csv 2013_cut.csv | csvcut -c 1,2,4 > finaldata.csv</code>.</h3>

</div>



<!-- About Row -->
<div class="row">
	<div id="end" class="col-sm-12">
			<h4>THIS PAGE WAS PUBLISHED BY GITHUB PAGES. FONTS USED: MONTSERRAT, OPEN SANS.</h4>
	</div>
</div>

</body>
</html>
